<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>bml • bml</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><script src="extra.js"></script><meta property="og:title" content="bml">
<meta name="description" content="Bayesian multiple-membership multilevel models with parameterizable weight function">
<meta property="og:description" content="Bayesian multiple-membership multilevel models with parameterizable weight function">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">bml</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="articles/bml.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Articles</h6></li>
    <li><a class="dropdown-item" href="articles/installation.html">Installation</a></li>
    <li><a class="dropdown-item" href="articles/model.html">Model structure</a></li>
    <li><a class="dropdown-item" href="articles/examples.html">Examples</a></li>
    <li><a class="dropdown-item" href="articles/faq.html">faq</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/benrosche/bml/" aria-label="GitHub"><span class="fa fab fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="section">
<img src="reference/figures/rmm-hexagon.png" align="right"><a class="anchor" aria-label="anchor" href="#section"></a>
</h1></div>
<div class="section level3">
<h3 id="bayesian-multiple-membership-multilevel-regression-models-with-endogenized-weights">Bayesian multiple membership multilevel regression models with endogenized weights<a class="anchor" aria-label="anchor" href="#bayesian-multiple-membership-multilevel-regression-models-with-endogenized-weights"></a>
</h3>
<!-- badges: start -->

<p><em>I am currently working on getting the package ready for a submission to CRAN.</em></p>
<p>The rmm package provides an interface to fit Bayesian multiple membership multilevel models with endogenized weights using JAGS from within R for a variety of outcomes (linear, logit, conditional logit, Cox, Weibull).</p>
<p>Most multilevel analyses examine how lower-level units (e.g. individuals) are affected by their embedding in contextual/aggregate units at a higher level (e.g. neighborhoods) (= macro-micro link). The rmm package uses the multiple membership multilevel model to conceptually reverse this setup. It allows studying how the effect of units at lower levels propagates to a higher level (= micro-macro link).</p>
<p>Previous studies examining micro-macro links either aggregated or disaggregated the data. Both approaches obstruct the inherent aggregation problem, ignore dependencies among observations, which induces excessive Type-I and Type-II error, and cannot separate micro- from macro-level variance. The generalized multiple membership multilevel model (MMMM) is able to overcome these problems by explicitly modeling the aggregation from micro to macro level by including an aggregation function in the regression model. It is a theoretically and statistically sound solution to the study of micro-macro links with regression analysis.</p>
</div>
<div class="section level3">
<h3 id="with-the-rmm-package-you-can">With the <strong>rmm</strong> package, you can…<a class="anchor" aria-label="anchor" href="#with-the-rmm-package-you-can"></a>
</h3>
<ul>
<li><p>explicitly model how the effect of lower level units propagate to a higher level</p></li>
<li><p>examine the fit of different aggregation functions, such as the min, max, mean, or sum</p></li>
<li><p>uncover heterogeneity in the effect of lower-level units on higher-level entities</p></li>
<li><p>control dependencies that arise from a multiple membership (crisscrossing) data structure</p></li>
<li><p>estimate the (residual) variance at the lower and the higher level</p></li>
</ul>
<p>This is the data structure that is being modeled:</p>
</div>
</div>
<div class="section level1">
<h1 id="section-1">
<img src="reference/figures/rmm-datastructure.png"><a class="anchor" aria-label="anchor" href="#section-1"></a>
</h1>
<p>In this example of coalition governments in Israel, political parties are the level-1 units, governments are the level-2 units, and the relationship between parties and governments is the multiple membership structure.</p>
<p>This is just an example. Multiple membership structures are ubiquitous in the real world. Other applications include:</p>
<ul>
<li>MMMM can be used to model <strong>spatial structures</strong>. Level-1 units, in this case, would be the neighborhoods in the influence sphere of the focal neighborhood, and level-2 units would be the focal neighborhoods. The benefit of using MMMM over other spatial regression models is that the weight matrix can be endogenized, which is not currently possible with other methods</li>
<li>MMMM can be used to model <strong>network structures</strong>. While this possibility has been explored in other work (Tranmer et al. 2014), the MMMM allows to endogenize the weight matrix, which is not currently possible with other multiple membership multilevel software, such as brms or MLWiN.</li>
<li>more multiple membership structures in the wild: multi-party wars, treaties, international organizations</li>
</ul>
<p>This is how the <code>rmm()</code> function looks like:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">coalgov</span><span class="op">)</span></span>
<span><span class="fu">rmm</span><span class="op">(</span><span class="va">Y</span> <span class="op">~</span> <span class="fl">1</span> <span class="op">+</span> <span class="va">X_l2</span> <span class="op">+</span> </span>
<span>      <span class="va">X_l3</span> <span class="op">+</span> <span class="fu"><a href="reference/hm.html">hm</a></span><span class="op">(</span>id<span class="op">=</span><span class="va">id_l3</span>, type<span class="op">=</span><span class="va">RE</span><span class="op">)</span> <span class="op">+</span></span>
<span>      <span class="fu"><a href="reference/mm.html">mm</a></span><span class="op">(</span><span class="fu"><a href="reference/id.html">id</a></span><span class="op">(</span><span class="va">id_l2</span>, <span class="va">id_l1</span><span class="op">)</span>, <span class="fu">mmc</span><span class="op">(</span><span class="va">X_l1</span><span class="op">)</span>, <span class="fu">mmw</span><span class="op">(</span><span class="va">w</span> <span class="op">~</span> <span class="fl">1</span><span class="op">/</span><span class="va">n</span><span class="op">^</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="op">-</span><span class="op">(</span><span class="va">X_w</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, </span>
<span>    family<span class="op">=</span><span class="st">"Gaussian"</span>, data<span class="op">=</span><span class="va">coalgov</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="developers">Developers<a class="anchor" aria-label="anchor" href="#developers"></a>
</h3>
<p>I welcome contributions to the package! Feel free to submit changes for review or contact me if you have any questions.</p>
</div>
<div class="section level3">
<h3 id="issues-or-feature-requests">Issues or Feature Requests<a class="anchor" aria-label="anchor" href="#issues-or-feature-requests"></a>
</h3>
<p>If you would like to log an issue or submit a feature request, please create a new issue or comment on an existing issue on <a href="https://github.com/benrosche/rmm/issues" class="external-link">GitHub Issues</a> on this repo.</p>
</div>
<div class="section level3">
<h3 id="changelog">Changelog<a class="anchor" aria-label="anchor" href="#changelog"></a>
</h3>
<p>See <a href="https://github.com/benrosche/rmm/news/index.html" class="external-link">NEWS.md</a> for the package changelog.</p>
<p>More information can be found <a href="http://benrosche.com/projects/rmm/" class="external-link">here</a></p>
</div>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/benrosche/bml/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/benrosche/bml/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3" class="external-link">GPL-3</a></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing bml</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Benjamin Rosche <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-5196-625X" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/benrosche/rmm/actions" class="external-link"><img src="https://github.com/benrosche/rmm/workflows/R-CMD-check/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Benjamin Rosche.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
