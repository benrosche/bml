<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>bml • bml</title>
<!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><script src="extra.js"></script><meta property="og:title" content="bml">
<meta name="description" content="Bayesian multiple-membership multilevel models with parameterizable weight function">
<meta property="og:description" content="Bayesian multiple-membership multilevel models with parameterizable weight function">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">bml</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.9.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="articles/bml.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Articles</h6></li>
    <li><a class="dropdown-item" href="articles/installation.html">Installation</a></li>
    <li><a class="dropdown-item" href="articles/model.html">Model Structure</a></li>
    <li><a class="dropdown-item" href="articles/examples.html">Examples</a></li>
    <li><a class="dropdown-item" href="articles/faq.html">Frequently Asked Questions</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/benrosche/bml/" aria-label="GitHub"><span class="fa fab fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><p><br></p>
<p><img src="reference/figures/bml-hexagon.png" align="right" width="240" alt="bml package hexagon logo"></p>
<div class="section level2">
<h2 id="bml-bayesian-multiple-membership-multilevel-models-with-parameterizable-weight-functions">bml: Bayesian Multiple-Membership Multilevel Models with Parameterizable Weight Functions<a class="anchor" aria-label="anchor" href="#bml-bayesian-multiple-membership-multilevel-models-with-parameterizable-weight-functions"></a>
</h2>
<!-- badges: start -->

<p><code>bml</code> is an R package for fitting <em>Bayesian Multiple-Membership Multilevel Models with Parameterizable Weight Functions</em> (“extended MMMM”) via JAGS. It supports a range of outcome types—including linear, logit, and survival models (Cox and Weibull)—and is designed for settings where researchers want to model how multiple units at a lower level jointly influence outcomes at a higher level.</p>
<p>In most multilevel analyses, the primary focus is on how higher-level contextual units (e.g., neighborhoods, schools, countries) shape outcomes observed at lower levels (e.g., individuals, students, governments), reflecting a macro-to-micro perspective. bml turns this logic around. Through an extended multiple-membership multilevel model, it allows researchers to explicitly model how the combined influence of many lower-level units propagates “upwards” to a higher-level outcome, enabling the study of micro-to-macro relationships.</p>
<p>Traditional approaches to micro-macro questions either (i) aggregate lower-level variables to the higher level (risking aggregation bias), or (ii) disaggregate higher-level outcomes to the lower level (artificially inflating sample size).</p>
<p>Both strategies obscure the underlying aggregation process, ignore the statistical dependencies present in the data, and prevent the decomposition of variance across levels. In contrast, the extended MMMM implemented in <code>bml</code> explicitly models aggregation through a weight function that may itself depend on parameters and covariates. This approach provides a theoretically grounded and statistically principled framework for studying micro-macro relationships using regression models.</p>
<div class="section level3">
<h3 id="with-the-bml-package-you-can">With the bml package, you can<a class="anchor" aria-label="anchor" href="#with-the-bml-package-you-can"></a>
</h3>
<ul>
<li><p><strong>Model how lower-level units jointly shape higher-level outcomes:</strong> For example, how political parties shape coalition outcomes, how family members influence household decisions, and how subunits jointly shape organizational performance.</p></li>
<li><p><strong>Compare and estimate aggregation functions:</strong> Test whether higher-level outcomes depend on the mean, sum, minimum, maximum, or other functions of lower-level features, instead of imposing a predefined aggregation.</p></li>
<li><p><strong>Endogenize the weight matrix:</strong> Rather than imposing a fixed spatial or network weight matrix, allow connection strengths to be endogenously determined as functions of covariates.</p></li>
<li><p><strong>Account for complex dependence structures:</strong> Simultaneously accommodate hierarchical, cross-classified, and multiple-membership structures, accounting for dependence patterns missed by conventional models and cluster-robust SEs.</p></li>
<li><p><strong>Partition variance across levels:</strong> Estimate residual variance at lower and higher levels to see how much heterogeneity is attributable to each level in your data.</p></li>
</ul>
</div>
<div class="section level3">
<h3 id="where-can-you-use-bml">Where can you use bml?<a class="anchor" aria-label="anchor" href="#where-can-you-use-bml"></a>
</h3>
<p>Multiple-membership structures are common across the social sciences and beyond. The model was developed for coalition government data, but the same structure appears in many other settings, such as:</p>
<ul>
<li><p><strong>International relations:</strong> Multi-party conflicts, alliances and treaties, as well as international organizations with overlapping memberships.</p></li>
<li><p><strong>Multi-level systems:</strong> Subnational units (e.g., regions, states, municipalities) that jointly shape national outcomes and may simultaneously participate in multiple higher-level arrangements.</p></li>
<li><p><strong>Organization research:</strong> Individuals who shape team- and firm-level outcomes and may simultaneously participate in multiple teams, as well as organizations engaged in joint ventures or other interorganizational collaborations.</p></li>
<li><p><strong>Spatial research:</strong> Neighborhoods or regions whose outcomes depend on the combined influence of surrounding areas. Here, bml allows the spatial weight matrix to be endogenized rather than imposed ex ante.</p></li>
<li><p><strong>Network applications:</strong> Actors whose outcomes depend on the combined influence of their network neighbors (e.g., social, collaboration, or communication ties). While similar ideas have been explored in earlier work (e.g., Tranmer et al. 2014), bml extends this by allowing the network weight matrix to be endogenized rather than imposed ex ante.</p></li>
</ul>
<p>In all these cases, bml provides tools to model dependence and interdependence: not just correcting standard errors for clustering, but explicitly representing how lower-level units combine to produce higher-level outcomes.</p>
<p>The following command fits an MMMM to coalition government data, modeling each coalition’s outcome as an equal-weighted combination of member parties’ organizational structure and random effects.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/bml.html">bml</a></span><span class="op">(</span></span>
<span>  <span class="va">Y</span> <span class="op">~</span> <span class="fl">1</span> <span class="op">+</span></span>
<span>    <span class="va">majority</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="reference/mm.html">mm</a></span><span class="op">(</span></span>
<span>      id <span class="op">=</span> <span class="fu"><a href="reference/id.html">id</a></span><span class="op">(</span><span class="va">pid</span>, <span class="va">gid</span><span class="op">)</span>,</span>
<span>      vars <span class="op">=</span> <span class="fu"><a href="reference/vars.html">vars</a></span><span class="op">(</span><span class="va">org_structure</span><span class="op">)</span>,</span>
<span>      fn <span class="op">=</span> <span class="fu"><a href="reference/fn.html">fn</a></span><span class="op">(</span><span class="va">w</span> <span class="op">~</span> <span class="fl">1</span> <span class="op">/</span> <span class="va">n</span>, c <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>      RE <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>    <span class="op">)</span>,</span>
<span>  family <span class="op">=</span> <span class="st">"Gaussian"</span>,</span>
<span>  data <span class="op">=</span> <span class="va">coalgov</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Parties (<code>pid</code>) can appear in multiple governments (<code>gid</code>), and the party-level covariate <code>org_structure</code> enters the model through the multiple-membership term <code><a href="reference/mm.html">mm()</a></code>. The weights are set to <code>w ~ 1 / n</code> (equal weights across the n parties in a coalition), and party-specific random effects are included via <code>RE = TRUE</code>.</p>
</div>
</div>
<div class="section level2">
<h2 id="learn-more">Learn more<a class="anchor" aria-label="anchor" href="#learn-more"></a>
</h2>
<p>Rosche, B. (2026). A Multilevel Model for Coalition Governments: Uncovering Party-Level Dependencies Within and Between Governments. <em>Political Analysis</em>, forthcoming. <a href="https://osf.io/preprints/socarxiv/4bafr" class="external-link">Preprint</a></p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Install the stable version from CRAN:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"bml"</span><span class="op">)</span></span></code></pre></div>
<p>Or install the development version from GitHub:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"benrosche/bml"</span><span class="op">)</span></span></code></pre></div>
<p>See the <a href="https://benrosche.github.io/bml/articles/installation.html">installation vignette</a> for detailed instructions including JAGS setup.</p>
</div>
<div class="section level2">
<h2 id="developers">Developers<a class="anchor" aria-label="anchor" href="#developers"></a>
</h2>
<p>I welcome contributions to the package! Feel free to submit changes for review or contact me if you have any questions.</p>
</div>
<div class="section level2">
<h2 id="issues-or-feature-requests">Issues or Feature Requests<a class="anchor" aria-label="anchor" href="#issues-or-feature-requests"></a>
</h2>
<p>If you would like to log an issue or submit a feature request, please create a new issue on <a href="https://github.com/benrosche/bml/issues" class="external-link">GitHub Issues</a>.</p>
</div>
<div class="section level2">
<h2 id="changelog">Changelog<a class="anchor" aria-label="anchor" href="#changelog"></a>
</h2>
<p>See <a href="https://benrosche.github.io/bml/news/index.html">NEWS.md</a> for the package changelog.</p>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/benrosche/bml/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/benrosche/bml/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3" class="external-link">GPL-3</a></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing bml</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Benjamin Rosche <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-5196-625X" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/benrosche/bml/actions" class="external-link"><img src="https://github.com/benrosche/bml/workflows/R-CMD-check/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Benjamin Rosche.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
